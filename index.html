<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wing Foil – Simulador (v23h7)</title>
  <style>
    :root{ --left-w: 381px; --right-w: 189px; }
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:#fafafa;color:#111}
    .wrap{display:grid;grid-template-columns: var(--left-w) 1fr var(--right-w); min-height:100vh;}
    .col{padding:10px 12px}
    .left{background:#fff;border-right:1px solid #e6e6e6;max-height:80vh;overflow-y:auto}
    .center{background:#fff}
    .right{background:#fff;border-left:1px solid #e6e6e6}
    h1{font-size:16px;margin:6px 0 8px}
    .section{margin-bottom:12px}
    .row{display:grid;grid-template-columns:1fr 240px;gap:8px;align-items:center;margin:2px 0}
    .scale-row{display:grid;grid-template-columns:1fr 240px;gap:8px;align-items:center;margin:2px 0}
    .scale-row label{display:flex;align-items:center;gap:3px}
    .slider-container{display:flex;align-items:center;gap:3px}
    .slider-container input:nth-child(1){margin-right:-8px}
    .scale-input{ width:34px; height:16px; font-size:10px; padding:1px; border:1px solid #ccc; border-radius:2px; text-align:center; }
    label{font-size:10px;color:#444;line-height:1.0}
    input[type=range]{width:120px;height:6px;margin-left:36px}
    input[type=range]::-webkit-slider-runnable-track{height:4px}
    input[type=range]::-webkit-slider-thumb{height:6px;width:6px;margin-top:-1px;-webkit-appearance:none;border-radius:0;background:#666;clip-path:polygon(50% 0%,0% 100%,100% 100%)}
    input[type=range]::-moz-range-track{height:4px}
    input[type=range]::-moz-range-thumb{height:6px;width:6px;border:none;border-radius:0;background:#666;clip-path:polygon(50% 0%,0% 100%,100% 100%)}
    select{padding:2px 6px;font-size:10px}
    .diagram{height:58vh; min-height:380px; border:1px solid #eee;border-radius:8px}
    svg{width:100%;height:100%}
    .controls{display:flex;gap:6px;align-items:center;flex-wrap:wrap;margin-top:6px}
    .btn{padding:5px 8px;border-radius:6px;border:1px solid #ddd;background:#fff;cursor:pointer;font-size:11px}
    .kpis{display:flex;flex-direction:column;gap:4px;max-height:336px;padding:4px 0}
    .kpi{display:flex;justify-content:space-between;align-items:center;border:1px solid #eee;border-radius:6px;padding:3px 4px;font-size:11px}
    .kpi .h{font-size:9px;color:#666}.kpi .v{font-weight:700;min-width:50px;text-align:right;font-size:10px}
    .checks{display:grid;grid-template-columns:1fr;gap:5px;font-size:12px}
    .chartbox{height:120px;border:1px solid #eee;border-radius:8px;margin-top:6px}
    .chartbox svg{width:100%;height:100%}
  </style>
</head>
<body>
<div class="wrap">
  <div class="col left">
    <h1>Parámetros</h1>
    <div class="section">
      <div class="row">
        <label title="Velocidad base V₀ (m/s). Velocidad media de la corriente relativa. V(t) = V₀ + A_V·sin(2πft)">V₀ (m/s) <b id="v0v"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.1" value="2" title="Límite mínimo" id="v0Min">
          <input id="v0" type="range" min="2" max="6" step="0.1" value="3.5">
          <input type="number" class="scale-input" step="0.1" value="6" title="Límite máximo" id="v0Max">
        </div>
      </div>
      <div class="row">
        <label title="Ángulo de pitch base φ (°). Ángulo de inclinación base de la tabla. Positivo cuando la proa está arriba (sentido antihorario desde eje horizontal). Convención aerodinámica estándar.">φ base (°) <b id="phiv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.1" value="-10" title="Límite mínimo" id="phiMin">
          <input id="phi" type="range" min="-10" max="15" step="0.1" value="3">
          <input type="number" class="scale-input" step="0.1" value="15" title="Límite máximo" id="phiMax">
        </div>
      </div>
      <div class="row">
        <label title="Ángulo de ataque base θ₀ (°). Ángulo base de la cuerda del ala. Positivo cuando el borde de ataque está arriba (sentido antihorario desde eje horizontal). Convención aerodinámica estándar.">θ₀ base (°) <b id="thetav"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.1" value="-5" title="Límite mínimo" id="theta0Min">
          <input id="theta0" type="range" min="-5" max="12" step="0.1" value="3.5">
          <input type="number" class="scale-input" step="0.1" value="12" title="Límite máximo" id="theta0Max">
        </div>
      </div>
      <div class="row">
        <label title="Ángulo de flujo base γ₀ (°). Ángulo base de la velocidad relativa del flujo. Positivo cuando el flujo viene desde arriba (sentido antihorario desde eje horizontal).">γ₀ (°) <b id="gammav"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.1" value="-15" title="Límite mínimo" id="gamma0Min">
          <input id="gamma0" type="range" min="-15" max="10" step="0.1" value="-2">
          <input type="number" class="scale-input" step="0.1" value="10" title="Límite máximo" id="gamma0Max">
        </div>
      </div>
      <div class="row">
        <label title="Superficie alar S (m²). Área proyectada del ala del foil. Superficie efectiva para generar sustentación.">S (m²) <b id="Sv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.005" value="0.08" title="Límite mínimo" id="SMin">
          <input id="S" type="range" min="0.08" max="0.22" step="0.005" value="0.14">
          <input type="number" class="scale-input" step="0.005" value="0.22" title="Límite máximo" id="SMax">
        </div>
      </div>
      <div class="row">
        <label title="Área de la cola S_tail (m²). Área proyectada de la cola del foil. Afecta la estabilidad y control.">S_tail (m²) <b id="tailAreav"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.005" value="0.01" title="Límite mínimo" id="tailAreaMin">
          <input id="tailArea" type="range" min="0.01" max="0.05" step="0.005" value="0.025">
          <input type="number" class="scale-input" step="0.005" value="0.05" title="Límite máximo" id="tailAreaMax">
        </div>
      </div>
      <div class="row">
        <label title="Longitud de la cola L_tail (m). Distancia desde el centro del foil hasta el centro de la cola.">L_tail (m) <b id="tailLengthv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.05" value="0.3" title="Límite mínimo" id="tailLengthMin">
          <input id="tailLength" type="range" min="0.3" max="1.0" step="0.05" value="0.6">
          <input type="number" class="scale-input" step="0.05" value="1.0" title="Límite máximo" id="tailLengthMax">
        </div>
      </div>
      <div class="row">
        <label title="Incidencia de la cola i_tail (°). Ángulo de incidencia de la cola respecto al ala principal. Positivo aumenta estabilidad.">i_tail (°) <b id="tailIncidencev"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.5" value="-5" title="Límite mínimo" id="tailIncidenceMin">
          <input id="tailIncidence" type="range" min="-5" max="5" step="0.5" value="0">
          <input type="number" class="scale-input" step="0.5" value="5" title="Límite máximo" id="tailIncidenceMax">
        </div>
      </div>
      <div class="row">
        <label title="Densidad del agua ρ (kg/m³). Densidad del fluido (agua). Afecta la sustentación y resistencia hidrodinámica.">ρ (kg/m³) <b id="rhov"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="1" value="950" title="Límite mínimo" id="rhoMin">
          <input id="rho" type="range" min="950" max="1030" step="1" value="1000">
          <input type="number" class="scale-input" step="1" value="1030" title="Límite máximo" id="rhoMax">
        </div>
      </div>
      <div class="row">
        <label title="Masa total (kg). Masa total del sistema (rider + equipo). Afecta la dinámica y fuerzas gravitatorias.">Masa (kg) <b id="massv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="1" value="55" title="Límite mínimo" id="massMin">
          <input id="mass" type="range" min="55" max="110" step="1" value="82">
          <input type="number" class="scale-input" step="1" value="110" title="Límite máximo" id="massMax">
        </div>
      </div>
      <div class="row">
        <label title="Relación L/D (adimensional). Relación entre sustentación y resistencia. Mayor valor indica mejor eficiencia aerodinámica.">L/D <b id="LDv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.1" value="4" title="Límite mínimo" id="LDMin">
          <input id="LD" type="range" min="4" max="12" step="0.1" value="7">
          <input type="number" class="scale-input" step="0.1" value="12" title="Límite máximo" id="LDMax">
        </div>
      </div>
      <div class="row">
        <label title="Pendiente dCL/dα (1/°). Derivada del coeficiente de sustentación respecto al ángulo de ataque. Medida en grados.">CL/° <b id="clslopev"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.001" value="0.04" title="Límite mínimo" id="clslopeMin">
          <input id="clslope" type="range" min="0.04" max="0.14" step="0.001" value="0.10">
          <input type="number" class="scale-input" step="0.001" value="0.14" title="Límite máximo" id="clslopeMax">
        </div>
      </div>
      <div class="row">
        <label title="CL máximo (adimensional). Coeficiente de sustentación máximo antes de entrada en pérdida.">CLmáx <b id="clmaxv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.05" value="0.7" title="Límite mínimo" id="clmaxMin">
          <input id="clmax" type="range" min="0.7" max="1.5" step="0.05" value="1.1">
          <input type="number" class="scale-input" step="0.05" value="1.5" title="Límite máximo" id="clmaxMax">
        </div>
      </div>
      <div class="row">
        <label title="Ángulo de pérdida α* (°). Ángulo de ataque donde comienza la pérdida aerodinámica. Positivo según convención estándar.">α* pérdida (°) <b id="stallv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.5" value="6" title="Límite mínimo" id="stallMin">
          <input id="stall" type="range" min="6" max="16" step="0.5" value="12">
          <input type="number" class="scale-input" step="0.5" value="16" title="Límite máximo" id="stallMax">
        </div>
      </div>
    </div>

    <h1>Ciclo</h1>
    <div class="section">
      <div class="row">
        <label title="Frecuencia de bombeo f (Hz). Frecuencia de oscilación del sistema. Tc = 1/f es el período del ciclo.">f (Hz) <b id="freqv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.05" value="0.6" title="Límite mínimo" id="freqMin">
          <input id="freq" type="range" min="0.6" max="2.5" step="0.05" value="1.3">
          <input type="number" class="scale-input" step="0.05" value="2.5" title="Límite máximo" id="freqMax">
        </div>
      </div>
      <div class="row">
        <label title="Amplitud de velocidad A_V (m/s). Amplitud de variación de la velocidad: V(t) = V₀ + A_V·sin(2πft)">amp V (m/s) <b id="ampVv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.05" value="0" title="Límite mínimo" id="ampVMin">
          <input id="ampV" type="range" min="0" max="1.2" step="0.05" value="0.5">
          <input type="number" class="scale-input" step="0.05" value="1.2" title="Límite máximo" id="ampVMax">
        </div>
      </div>
      <div class="row">
        <label title="Amplitud de θ A_θ (°). Amplitud de variación del ángulo de ataque: θ(t) = θ₀ + A_θ·sin(2πft + φ_θ)">amp θ base (°) <b id="ampTv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.1" value="0" title="Límite mínimo" id="ampTMin">
          <input id="ampT" type="range" min="0" max="4" step="0.1" value="1.5">
          <input type="number" class="scale-input" step="0.1" value="4" title="Límite máximo" id="ampTMax">
        </div>
      </div>
      <div class="row">
        <label title="Amplitud de γ A_γ (°). Amplitud de variación del ángulo de flujo: γ(t) = γ₀ + A_γ·sin(2πft + φ_γ)">amp γ (°) <b id="ampGv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.1" value="0" title="Límite mínimo" id="ampGMin">
          <input id="ampG" type="range" min="0" max="5" step="0.1" value="1.8">
          <input type="number" class="scale-input" step="0.1" value="5" title="Límite máximo" id="ampGMax">
        </div>
      </div>
      <div class="row">
        <label title="Fase de θ φ_θ (°). Desfase de fase para θ(t). Ángulo en grados para el seno.">fase θ (°) <b id="phaseTv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="5" value="0" title="Límite mínimo" id="phaseTMin">
          <input id="phaseT" type="range" min="0" max="180" step="5" value="60">
          <input type="number" class="scale-input" step="5" value="180" title="Límite máximo" id="phaseTMax">
        </div>
      </div>
      <div class="row">
        <label title="Fase de γ φ_γ (°). Desfase de fase para γ(t). Ángulo en grados para el seno.">fase γ (°) <b id="phaseGv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="5" value="0" title="Límite mínimo" id="phaseGMin">
          <input id="phaseG" type="range" min="0" max="180" step="5" value="110">
          <input type="number" class="scale-input" step="5" value="180" title="Límite máximo" id="phaseGMax">
        </div>
      </div>
      <div class="row">
        <label title="Paso de integración Δt (s). Paso de tiempo para el integrador numérico. Afecta precisión y velocidad de simulación.">Δt (s) <b id="dtv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.001" value="0.001" title="Límite mínimo" id="dtStepMin">
          <input id="dtStep" type="range" min="0.001" max="0.02" step="0.001" value="0.004">
          <input type="number" class="scale-input" step="0.001" value="0.02" title="Límite máximo" id="dtStepMax">
        </div>
      </div>
    </div>

    <h1>Rider</h1>
    <div class="section">
      <div class="row">
        <label title="Reparto estático λ (adimensional). Fracción de peso apoyada en el pie delantero. λ = F_delantero / Peso_total">λ reparto (front) <b id="lambdav"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="0.3" title="Límite mínimo" id="lambdaMin">
          <input id="lambda" type="range" min="0.3" max="0.7" step="0.01" value="0.55">
          <input type="number" class="scale-input" step="0.01" value="0.7" title="Límite máximo" id="lambdaMax">
        </div>
      </div>
      <div class="row">
        <label title="Distancia entre pies d (m). Distancia horizontal entre los puntos de apoyo de los pies.">d stance (m) <b id="dv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="0.4" title="Límite mínimo" id="dstanceMin">
          <input id="dstance" type="range" min="0.4" max="0.9" step="0.01" value="0.70">
          <input type="number" class="scale-input" step="0.01" value="0.9" title="Límite máximo" id="dstanceMax">
        </div>
      </div>
      <div class="row">
        <label title="Amplitud delantera A_f (N). Amplitud de fuerza adicional en el pie delantero. F_delantero(t) = λ·mg + A_f·sin(2πft + φ_f)">A_f (N) <b id="Afv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="5" value="0" title="Límite mínimo" id="AfMin">
          <input id="Af" type="range" min="0" max="600" step="5" value="120">
          <input type="number" class="scale-input" step="5" value="600" title="Límite máximo" id="AfMax">
        </div>
      </div>
      <div class="row">
        <label title="Amplitud trasera A_b (N). Amplitud de fuerza adicional en el pie trasero. F_trasero(t) = (1-λ)·mg + A_b·sin(2πft + φ_b)">A_b (N) <b id="Abv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="5" value="0" title="Límite mínimo" id="AbMin">
          <input id="Ab" type="range" min="0" max="600" step="5" value="220">
          <input type="number" class="scale-input" step="5" value="600" title="Límite máximo" id="AbMax">
        </div>
      </div>
      <div class="row">
        <label title="Fase delantera φ_f (°). Fase para la fuerza del pie delantero.">fase_f (°) <b id="phifv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="5" value="0" title="Límite mínimo" id="phaseFMin">
          <input id="phaseF" type="range" min="0" max="180" step="5" value="0">
          <input type="number" class="scale-input" step="5" value="180" title="Límite máximo" id="phaseFMax">
        </div>
      </div>
      <div class="row">
        <label title="Fase trasera φ_b (°). Fase para la fuerza del pie trasero.">fase_b (°) <b id="phibv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="5" value="0" title="Límite mínimo" id="phaseBMin">
          <input id="phaseB" type="range" min="0" max="180" step="5" value="60">
          <input type="number" class="scale-input" step="5" value="180" title="Límite máximo" id="phaseBMax">
        </div>
      </div>
      <div class="row">
        <label title="Ganancia θ G_θ (°/(N·m)). Ganancia del ángulo de ataque respecto al momento del rider: θ_eff = θ₀ - G_θ·M_rider">Gθ (deg/(N·m)) <b id="Gthv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.0005" value="0" title="Límite mínimo" id="GthetaMin">
          <input id="Gtheta" type="range" min="0" max="0.03" step="0.0005" value="0.004">
          <input type="number" class="scale-input" step="0.0005" value="0.03" title="Límite máximo" id="GthetaMax">
        </div>
      </div>
      <div class="row">
        <label title="Ganancia φ K_φ (°/(N·m)). Ganancia del ángulo φ respecto al momento del rider: φ_eff = φ₀ - K_φ·M_rider">Kφ (deg/(N·m)) <b id="Kphiv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.0005" value="0" title="Límite mínimo" id="KphiMin">
          <input id="Kphi" type="range" min="0" max="0.15" step="0.0005" value="0.050">
          <input type="number" class="scale-input" step="0.0005" value="0.15" title="Límite máximo" id="KphiMax">
        </div>
      </div>
      <div class="row">
        <label title="Altura inicial h₀ (m). Altura inicial del centro de presión. Negativo = bajo el agua. Positivo = sobre el agua.">h₀ (m, <i>negativo</i>) <b id="h0v"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="-0.8" title="Límite mínimo" id="h0Min">
          <input id="h0" type="range" min="-0.8" max="0.2" step="0.01" value="-0.20">
          <input type="number" class="scale-input" step="0.01" value="0.2" title="Límite máximo" id="h0Max">
        </div>
      </div>
      <div class="row">
        <label title="Amortiguamiento vertical c_w (N·s/m). Coeficiente de amortiguamiento vertical. F_amort = -c_w·v_vertical">c_w (N·s/m) <b id="cwv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="5" value="0" title="Límite mínimo" id="cwMin">
          <input id="cw" type="range" min="0" max="400" step="5" value="150">
          <input type="number" class="scale-input" step="5" value="400" title="Límite máximo" id="cwMax">
        </div>
      </div>
      <div class="row">
        <label title="Escala vertical (px/m). Factor de escala para la dimensión vertical en el diagrama (píxeles por metro).">escala vertical (px/m) <b id="vscalev"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="1" value="200" title="Límite mínimo" id="vscaleMin">
          <input id="vscale" type="range" step="1" value="600" min="200" max="2000">
          <input type="number" class="scale-input" step="1" value="2000" title="Límite máximo" id="vscaleMax">
        </div>
      </div>
      <div class="row">
        <label title="Escala horizontal (px/m). Factor de escala para longitudes horizontales en el diagrama (píxeles por metro).">escala horizontal (px/m) <b id="hscalev"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="5" value="60" title="Límite mínimo" id="hscaleMin">
          <input id="hscale" type="range" step="5" value="110">
          <input type="number" class="scale-input" step="5" value="240" title="Límite máximo" id="hscaleMax">
        </div>
      </div>
      <div class="scale-row">
        <label style="font-size:9px;color:#444;">escala velocidad <b id="velscalev"></b></label>
        <div class="slider-container">
          <input id="velscaleMin" type="number" step="0.1" value="0.1" class="scale-input" title="Límite mínimo">
          <input id="velscale" type="range" step="0.1" value="1.8">
          <input id="velscaleMax" type="number" step="0.1" value="6" class="scale-input" title="Límite máximo">
        </div>
      </div>
      <div class="scale-row">
        <label style="font-size:9px;color:#444;">escala fuerzas <b id="fuerzascalev"></b></label>
        <div class="slider-container">
          <input id="fuerzascaleMin" type="number" step="0.1" value="0.1" class="scale-input" title="Límite mínimo">
          <input id="fuerzascale" type="range" step="0.1" value="1.8">
          <input id="fuerzascaleMax" type="number" step="0.1" value="6" class="scale-input" title="Límite máximo">
        </div>
      </div>
    </div>

    <h1>Tabla &amp; Mástil</h1>
    <div class="section">
      <div class="row">
        <label title="Volumen tabla (L). Volumen de la tabla para cálculo de empuje de Arquímedes.">Volumen tabla (L) <b id="volv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="1" value="40" title="Límite mínimo" id="boardVolLMin">
          <input id="boardVolL" type="range" min="40" max="140" step="1" value="90">
          <input type="number" class="scale-input" step="1" value="140" title="Límite máximo" id="boardVolLMax">
        </div>
      </div>
      <div class="row">
        <label title="Superficie tabla (m²). Área de la superficie mojada de la tabla para cálculo de empuje de Arquímedes.">Superficie tabla (m²) <b id="areav"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="0.40" title="Límite mínimo" id="boardAreaMin">
          <input id="boardArea" type="range" min="0.40" max="1.20" step="0.01" value="0.75">
          <input type="number" class="scale-input" step="0.01" value="1.20" title="Límite máximo" id="boardAreaMax">
        </div>
      </div>
      <div class="row">
        <label title="Altura mástil (m). Altura desde la tabla hasta el foil.">Altura mástil (m) <b id="mastv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="0.60" title="Límite mínimo" id="mastHMin">
          <input id="mastH" type="range" min="0.60" max="1.20" step="0.01" value="0.85">
          <input type="number" class="scale-input" step="0.01" value="1.20" title="Límite máximo" id="mastHMax">
        </div>
      </div>
      <div class="row">
        <label title="Longitud tabla (m). Longitud total de la tabla para representación gráfica.">L tabla (m) <b id="Ltabv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="1.10" title="Límite mínimo" id="boardLenMin">
          <input id="boardLen" type="range" min="1.10" max="1.90" step="0.01" value="1.50">
          <input type="number" class="scale-input" step="0.01" value="1.90" title="Límite máximo" id="boardLenMax">
        </div>
      </div>
    </div>

    <h1>Geometría del Sistema</h1>
    <div class="section">
      <div class="row">
        <label title="Offset horizontal del foil (m). Distancia horizontal desde el centro de la tabla hasta el centro del foil.">Offset X foil (m) <b id="foilOffsetXv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="0.20" title="Límite mínimo" id="foilOffsetXMin">
          <input id="foilOffsetX" type="range" min="0.20" max="0.50" step="0.01" value="0.30">
          <input type="number" class="scale-input" step="0.01" value="0.50" title="Límite máximo" id="foilOffsetXMax">
        </div>
      </div>
      <div class="row">
        <label title="Offset vertical del foil (m). Altura del centro del foil sobre la tabla.">Offset Z foil (m) <b id="foilOffsetZv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.005" value="0.02" title="Límite mínimo" id="foilOffsetZMin">
          <input id="foilOffsetZ" type="range" min="0.02" max="0.10" step="0.005" value="0.05">
          <input type="number" class="scale-input" step="0.005" value="0.10" title="Límite máximo" id="foilOffsetZMax">
        </div>
      </div>
      <div class="row">
        <label title="Offset horizontal de la cola (m). Distancia horizontal desde el foil hasta el centro de la cola.">Offset X cola (m) <b id="tailOffsetXv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="0.40" title="Límite mínimo" id="tailOffsetXMin">
          <input id="tailOffsetX" type="range" min="0.40" max="0.80" step="0.01" value="0.60">
          <input type="number" class="scale-input" step="0.01" value="0.80" title="Límite máximo" id="tailOffsetXMax">
        </div>
      </div>
      <div class="row">
        <label title="Offset vertical de la cola (m). Altura relativa del centro de la cola respecto al foil.">Offset Z cola (m) <b id="tailOffsetZv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.005" value="0.00" title="Límite mínimo" id="tailOffsetZMin">
          <input id="tailOffsetZ" type="range" min="0.00" max="0.05" step="0.005" value="0.02">
          <input type="number" class="scale-input" step="0.005" value="0.05" title="Límite máximo" id="tailOffsetZMax">
        </div>
      </div>
      <div class="row">
        <label title="Cuerda del foil (m). Longitud de la cuerda del perfil del foil.">Cuerda foil (m) <b id="foilChordv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="0.15" title="Límite mínimo" id="foilChordMin">
          <input id="foilChord" type="range" min="0.15" max="0.35" step="0.01" value="0.25">
          <input type="number" class="scale-input" step="0.01" value="0.35" title="Límite máximo" id="foilChordMax">
        </div>
      </div>
      <div class="row">
        <label title="Cuerda de la cola (m). Longitud de la cuerda del perfil de la cola.">Cuerda cola (m) <b id="tailChordv"></b></label>
        <div class="slider-container">
          <input type="number" class="scale-input" step="0.01" value="0.10" title="Límite mínimo" id="tailChordMin">
          <input id="tailChord" type="range" min="0.10" max="0.20" step="0.01" value="0.15">
          <input type="number" class="scale-input" step="0.01" value="0.20" title="Límite máximo" id="tailChordMax">
        </div>
      </div>
    </div>


  </div>

  <div class="col center">
    <h1>Diagrama geométrico</h1>
    <div class="diagram"><svg id="geom"></svg></div>
    <div class="controls">
      <button class="btn" id="back">&#9664;&#9664; Step</button>
      <button class="btn" id="playPause">▶ Play</button>
      <button class="btn" id="testCharts">📊 Test Charts</button>
      <button class="btn" id="fwd">Step &#9654;&#9654;</button>
      <span>t = <b id="tVal">0.00</b> s</span>
      <span>| Pan:</span>
      <button class="btn" id="panL">←</button>
      <button class="btn" id="panU">↑</button>
      <button class="btn" id="panD">↓</button>
      <button class="btn" id="panR">→</button>
      <button class="btn" id="pan0">Reset</button>
      <button class="btn" id="centerTable">📍 Centrar Tabla</button>
      <button class="btn" id="state0">Reset estado</button>
    </div>
    <div class="section checks" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 12px;">
      <label><input id="showHorizon" type="checkbox" checked> Mostrar superficie</label>
      <label><input id="showFeet" type="checkbox" checked> Mostrar flechas de pies</label>
      <label><input id="showArc" type="checkbox" checked> Mostrar arco de α</label>
      <label><input id="showLabels" type="checkbox" checked> Mostrar etiquetas</label>
      <label><input id="showPhiAngle" type="checkbox" checked> Mostrar ángulo φ</label>
      <label><input id="phiFollow" type="checkbox" checked> φ sigue momento (Kφ·M_rider)</label>
      <label><input id="showFlow" type="checkbox" checked> Mostrar vector de flujo (γ)</label>
      <label><input id="showChord" type="checkbox" checked> Mostrar cuerda (θ_eff)</label>
      <label><input id="showLD" type="checkbox" checked> Mostrar vectores L/D</label>
      <label><input id="showFoil" type="checkbox" checked> Mostrar foil principal</label>
      <label><input id="showTail" type="checkbox" checked> Mostrar cola del foil</label>
      <label><input id="showTableVel" type="checkbox" checked> Mostrar velocidad tabla</label>
      <label><input id="showAxesW" type="checkbox" checked> Ejes globales W</label>
      <label><input id="showAxesB" type="checkbox" checked> Ejes en tabla B</label>
      <label><input id="showWeight" type="checkbox" checked> Mostrar peso (mg)</label>
      <label><input id="showBuoy" type="checkbox" checked> Mostrar Arquímedes</label>
      <label><input id="showResultants" type="checkbox" checked> Mostrar resultantes</label>
      <label><input id="showGeometry" type="checkbox"> Mostrar geometría sistema</label>

    </div>
  </div>

  <div class="col right">
    <h1>KPI</h1>
    <div class="kpis">
      <div class="kpi"><div class="h" title="Ángulo de ataque α (°). Ángulo entre la cuerda del ala y la velocidad relativa del flujo. Positivo cuando el borde de ataque está arriba (convención aerodinámica estándar). α = θ_eff - γ">α (°)</div><div class="v" id="alphaOut">—</div></div>
      <div class="kpi"><div class="h" title="Ángulo efectivo θ_eff (°). Ángulo efectivo de la cuerda considerando el efecto del rider. θ_eff = θ₀ - G_θ·M_rider">θ_eff (°)</div><div class="v" id="thetaEffOut">—</div></div>
      <div class="kpi"><div class="h" title="Sustentación L (N). Componente de sustentación hidrodinámica. L = ½·ρ·V²·S·CL">L (N)</div><div class="v" id="LOut" style="color:#2e7d32">—</div></div>
      <div class="kpi"><div class="h" title="Sustentación vertical L_v (N). Componente vertical de la sustentación. L_v = L·cos(γ)">L vertical (N)</div><div class="v" id="LvOut" style="color:#2e7d32">—</div></div>
      <div class="kpi"><div class="h" title="Fuerza rider vertical (N). Fuerza vertical total ejercida por el rider (pies delantero + trasero).">F_rider vert. (N)</div><div class="v" id="FrOut" style="color:#c00">—</div></div>
      <div class="kpi"><div class="h" title="Resistencia D (N). Componente de resistencia hidrodinámica. D = L / (L/D)">D (N)</div><div class="v" id="DOut">—</div></div>
      <div class="kpi"><div class="h" title="Empuje horizontal (N). Componente horizontal de la fuerza hidrodinámica. Th = L_x + D_x">Empuje (N)</div><div class="v" id="ThOut">—</div></div>
      <div class="kpi"><div class="h" title="Porcentaje de soporte (%). Porcentaje de soporte hidrodinámico: Sup = (L_v + F_Arquímedes) / mg × 100%">% soporte</div><div class="v" id="SupOut">—</div></div>
      <div class="kpi"><div class="h" title="Momento rider M_rider (N·m). Momento ejercido por el rider alrededor del centro de presión. M_rider = (F_trasero - F_delantero) × d/2">M_rider (N·m)</div><div class="v" id="MrOut">—</div></div>
      <div class="kpi"><div class="h" title="Altura CoP h (m). Altura del centro de presión relativa a la superficie del agua.">h<sub>CoP</sub> (m)</div><div class="v" id="hOut">—</div></div>
      <div class="kpi"><div class="h" title="Velocidad tabla V_tabla (m/s). Velocidad total de la tabla: V_tabla = √(u² + w²)">V_tabla (m/s)</div><div class="v" id="VTableOut" style="color:#0066cc">—</div></div>
      <div class="kpi"><div class="h" title="Empuje Arquímedes (N). Fuerza de empuje hidrostático: F_Arquímedes = ρ·g·V_submergido">Empuje Arq. (N)</div><div class="v" id="BOut">—</div></div>
      <div class="kpi"><div class="h" title="Calado tabla (m). Profundidad de inmersión de la tabla en el agua.">Calado tabla (m)</div><div class="v" id="draftOut">—</div></div>
      <div class="kpi"><div class="h" title="Posición X del centro geométrico de la tabla (m). Coordenada horizontal en el sistema de referencia global.">X_tabla (m)</div><div class="v" id="tableX" style="color:#ff6600">—</div></div>
      <div class="kpi"><div class="h" title="Posición Y del centro geométrico de la tabla (m). Altura del centro de presión en el sistema de referencia global.">Y_tabla (m)</div><div class="v" id="tableY" style="color:#ff6600">—</div></div>
      <div class="kpi"><div class="h" title="Posición Z del centro geométrico de la tabla (m). Coordenada de profundidad en el sistema de referencia global.">Z_tabla (m)</div><div class="v" id="tableZ" style="color:#ff6600">—</div></div>
    </div>
    <div class="chartbox"><svg id="chartAngles"></svg></div>
    <div class="chartbox"><svg id="chartForces"></svg></div>
  </div>
</div>

<script src="sim.js" defer></script>
</body>
</html>
